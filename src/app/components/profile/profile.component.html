<!-- user profile -->
    <div class="container mt-3">
        <div class="row flex-lg-nowrap">
            <div class="col">
                <div class="row">
                    <div class="col mb-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="e-profile">
                                    <div class="row">
                                        <div class="col d-flex flex-column flex-sm-row justify-content-between mb-3">
                                            <div class="text-center text-sm-left mb-2 mb-sm-0">
                                                <h4 class="pt-sm-2 pb-1 mb-0 text-nowrap">{{user?.name}}</h4>
                                            </div>
                                            <div class="text-center text-sm-right">
                                                <div class="text-muted"><small>Joined {{user?.registered |
                                                        date:'mediumDate'}}</small></div>
                                                <div class="text-muted"><small>Roles: {{ user?.roles.join(', ') }}</small></div>
                                                <div class="text-muted custom-checkbox"><small>
                                                    <input name="active" type="checkbox"
                                                        [(ngModel)]="user.enabled"
                                                        class="custom-control-input">
                                                    <label
                                                        class="custom-control-label">Enabled</label></small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-content pt-3">
                                        <div class="tab-pane active">
                                            <form #profileUserForm="ngForm"
                                                (ngSubmit)="updateProfile(profileUserForm.value)" class="form"
                                                novalidate>
                                                <div class="row">
                                                    <div class="col">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label>Name</label>
                                                                    <input type="text" name="name" required
                                                                    [(ngModel)]="user.name"
                                                                    ngModel #nameInput="ngModel"
                                                                        class="form-control">
                                                                    <span class="help-block" *ngIf="nameInput.invalid && nameInput.touched" style="color:red;">Please enter a username</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label>Email</label>
                                                                    <input type="text" name="email" required
                                                                        [(ngModel)]="user.email" class="form-control">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label>Password</label>
                                                                    <input type="password" name="password" required
                                                                    ngModel #passwordInput="ngModel" class="form-control">
                                                                    <span class="help-block" *ngIf="passwordInput.invalid && passwordInput.touched" style="color:red;">Please enter a password</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label>Repeat Password</label>
                                                                    <input type="password" name="repeatPassword" required
                                                                    ngModel #repeatPasswordInput="ngModel" class="form-control">
                                                                    <span class="help-block" *ngIf="repeatPasswordInput.invalid && repeatPasswordInput.touched" style="color:red;">Please repeat a password</span>
                                                                    <span class="help-block" *ngIf="(passwordInput.value != repeatPasswordInput.value) && (repeatPasswordInput.value != '')" style="color:red;">Passwords do not match</span>                                                      
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col d-flex justify-content-end">
                                                        <a (click)="back()" class="btn btn-secondary mr-1">
                                                            Close
                                                        </a>
                                                        <button [disabled]="profileUserForm.invalid || passwordInput.value != repeatPasswordInput.value" class="btn btn-primary" type="submit">
                                                            Save
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 mb-3">
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="px-xl-3">
                                    <button (click)="logOut()" class="btn btn-block btn-secondary">
                                        <span>Logout</span>
                                        <i class="fas fa-sign-out-alt ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="px-xl-3">
                                    <button (click)="deleteProfile()"  class="btn btn-block btn-danger">
                                        <span>Delete Profile</span>
                                        <i class="fas fa-user-slash ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="card">
                            <div class="card-body">
                                <h6 class="card-title font-weight-bold">Permissions From Role</h6>
                                <h6 *ngFor="let authority of user?.authorities" class="card-text">{{authority}}</h6>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
